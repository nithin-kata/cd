4 c) Implementation of calculator using lex and yacc.

Program: 

                                     exp4c.l

%{
#include "y.tab.h"
#include <stdlib.h>
%}

%%
[0-9]+      { yylval = atoi(yytext); return NUM; }
[ \t]       ;
\n          { return '\n'; }
.           { return yytext[0]; }
%%

int yywrap() { return 1; }


                                       exp4c.y

 %{
#include <stdio.h>
#include <stdlib.h>

int yylex();
void yyerror(char *s) {
    printf("Error: %s\n", s);
}
%}

%token NUM

%%

S :
    /* empty */
  | S E '\n'   { printf("= %d\n", $2); }
;

E :
    E '+' T    { $$ = $1 + $3; }
  | E '-' T    { $$ = $1 - $3; }
  | T
;

T :
    T '*' F    { $$ = $1 * $3; }
  | T '/' F    { $$ = $3 ? $1 / $3 : (yyerror("Divide by zero"), 0); }
  | F
;

F :
    '(' E ')'  { $$ = $2; }
  | NUM
;

%%

int main() {
    printf("Enter expressions:\n");
    return yyparse();
}



 Output:

 (myenv) vaishnavi@VAISHNAVI:~/cd/lab$ lex exp4c.l
 (myenv) vaishnavi@VAISHNAVI:~/cd/lab$ yacc-d exp4c.y
 (myenv) vaishnavi@VAISHNAVI:~/cd/lab$ gcc lex.yy.c y.tab.c
 (myenv) vaishnavi@VAISHNAVI:~/cd/lab$ ./a.out
 Enter expressions:
 2+3
 = 5
 3-2
 = 1
 2-3
 =-1
 10/0
 Error: Divide by zero
 = 0
